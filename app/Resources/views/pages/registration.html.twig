{% extends "default/layout_homepage.html.twig" %}

{% trans_default_domain 'register' %}

{% block stylesheets %}
 {{ parent() }}
 <link rel="stylesheet" type="text/css" href="{{ asset('./flag-icon-css/flag-icon.min.css','vendor') }}">
 <link rel="stylesheet" type="text/css" href="{{ asset('registration.css','css') }}">
{% endblock %}

{% block title %}
{{'register.title'|trans}}
{% endblock %}

{% block main %}
  <h1 class="text-center">{{'register.title'|trans}}</h1>

  <!-- 1rst step -->
  <div class="row" data-comment="step-1">

    <div class="col ml-3 mr-3 p-2 shade border float-left">
    <div class="row">
      <div class="col-12">
        <h2 class="text-center">{{ 'register.step1.title'|trans }}</h2>
      </div>
    </div>

    <div class="row">

     <form id="registrationForm"  class="col m-1">
      <div class="row">
        <div class="form-group col-12 col-md-12 col-lg-6">
              <label for="inputName">{{ 'register.name'|trans }} <i class="fas fa-database"></i> *</label>
              <input class="form-control" data-qr="true" type="text" data-on-reset="no-val" name="name" placeholder="" required>
        </div>

        <div class="form-group col-12 col-md-12 col-lg-6">
              <label for="inputName">{{ 'register.surname'|trans }} <i class="fas fa-database"></i> *</label>
              <input class="form-control"  data-qr="true" data-on-reset="no-val" type="text" name="surname" required>
        </div>
      </div>

      <div class="row">
        <div class="form-group col">
              <label for="inputName">{{ 'register.email'|trans }} <i class="fas fa-database"></i> *</label>
              <input class="form-control" data-qr="true" data-on-reset="no-val" type="email" name="email" required>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label>{{ 'register.nationalid'|trans }} **</label>
          <div class="input-group mb-2">
            <div class="input-group-prepend">
              <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ><span id="flagIndicator" data-on-reset="set-class" data-on-reset-value="flag-icon flag-icon-cy" class="flag-icon flag-icon-cy"></span></button>
              <div class="dropdown-menu">
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.cypriot'| trans }}')" href="#"><span class="flag-icon flag-icon-cy"></span> {{ 'register.cypriot'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.greek'| trans }}')" href="#"><span class="flag-icon flag-icon-gr"></span> {{ 'register.greek'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.british'| trans }}')" href="#"><span class="flag-icon flag-icon-gb"></span> {{ 'register.british'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.turkish'| trans }}')" href="#"><span class="flag-icon flag-icon-tr"></span> {{ 'register.turkish'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.russian'| trans }}')" href="#"><span class="flag-icon flag-icon-ru"></span> {{ 'register.russian'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.vietnameese'| trans }}')" href="#"><span class="flag-icon flag-icon-vn"></span> {{ 'register.vietnameese'| trans }}</a>
                <a class="dropdown-item flag" onclick="selectCountry(this,'{{ 'register.sri_lanka'| trans }}')" href="#"><span class="flag-icon flag-icon-lk"></span> {{ 'register.sri_lanka'| trans }}</a>
              </div>
            </div>
            <input type="text" class="form-control valuechange" name="id_number" data-on-reset="no-val" aria-label="{{ 'register.nationalid'|trans }}" required>
         </div>
       </div>
     </div>

     <div id="signatureContainer" class="row">
       <input id="selectSignature" type="file" data-on-reset="no-val" style="display:none" name="signature" />
       <div class="droparea"><label id="replaceWithImage" for="selectSignature"><span>{{ 'register.selectSignature'|trans|raw }}</span></label></div>
     </div>

     <div class="row mt-3">
       <div class="col">
        <button type="button" onClick="nextStep(this)" data-scroll-to="contactEmailSubmit" class="btn btn-block btn-primary"> {{ 'register.next_step'|trans }} </button>
      </div>
     </div>
     <input name="idType" value="{{ 'register.cypriot'| trans }}" data-on-reset="set-val" data-on-reset-value="{{ 'register.cypriot'| trans }}" type="hidden">
   </form>
   </div>
 </div>

   <div class="col mr-3 ml-3 border shade float-right">
     <hr class="d-md-none d-lg-none d-block">
     <h2 class="col-12 text-sm">{{ 'register.notice'|trans }}:</h2>
     <ul class="col-12" style="list-style:none">
       <li class="mb-1">* {{ 'register.mandatory'|trans }}</li>
       <li class="mb-1"><i class="fas fa-database"></i> {{ 'register.storedindb'|trans }} </li>
       <li>** {{ 'register.reasonwhyneedidnum'|trans|raw }}
     </ul>
   </div>
 </div>

 <!-- 2nd Step -->
 <div id="contactEmailSubmit" data-step="2" style="display:none" class="row border shade ml-1 mr-1 mt-4">
     <div class="col-12">
       <div class="col-12">
         <h2 class="text-center">{{ 'register.step2.title'|trans }}</h2>
       </div>
       <p class="col-12 mp-3">
         {{ 'register.step2.explanation'|trans }}
       </p>
       <hr>
     </div>

     <form id="contactForm" class="col-12" data-scroll-to="displayRegistationPaperApplicationWrapper" action="{{ path('registration_email_contact') }}" method="post">
       <input type="hidden" name="csrf" value="{{ csrf_token('insert-email') }}"/>

         <div class="col-12 mb-3">
           <div class="col-12">
             <div class="input-group">
                <div class="input-group-prepend">
                  <button class="btn btn-secondary" id="emailAutofill">{{ 'register.step2.email.autofill'|trans }}</button>
                </div>
                <input type="email" name="email" class="form-control" placeholder="{{ 'register.step2.email'|trans }}" />
              </div>
           </div>
         </div>
        <div class="col-12">
           <div class="col-2 float-left border">
             <img id="capthaImage" class="img-fluid" data-captha-renew="registration_step2" src="{{ image }}">
           </div>
           <div class="col-10 float-right">
             <div class="input-group">
                <div class="input-group-prepend">
                  <button class="btn btn-secondary" id="reset-captcha">{{ 'register.captha.new-image'|trans }}</button>
                </div>
                <input type="text" name="captcha" class="form-control" placeholder="{{ 'register.captcha'|trans }}" />
              </div>
           </div>
         </div>
         <div class="col-12 mt-5 mb-2">
           <div class="col-12 col-sm-12 col-md-5 col-lg-5 ml-auto">
             <div class="btn-group" role="group" aria-label="Basic example">
              <button class="btn btn-link text-danger">{{ 'register.step2.no'|trans }}</button>
              <button type="submit" class="btn btn-success">{{ 'register.step2.yes'|trans }}</button>
              </div>
          </div>
         </div>
    </form>
 </div>

 <!-- last step -->
 <div id="displayRegistationPaperApplicationWrapper" data-step="3" style="display:none" class="row border shade mt-5">
   <div class="col-12">
     <h2 class="text-center">{{ 'register.preview.title'|trans }}</h2>
     <button class="btn btn-primary mb-2 mt-1" onclick="printPaperApplciationForm()"> <i class="fas fa-print"></i></button>
   </div>
   <iframe id="displayRegistationPaperApplication"  name="displayRegistationPaperApplication" class="col-12">
   </iframe>
 </div>

<!-- templates section -->

<!-- template for the printable application for member registration -->
<script id="registationPaperApplication" type="text/x-jsrender">
  {% include('./templates/applicationForm/applicationFormJsRenderTemplate.html.twig') %}
</script>

{% endblock main %}

{% block javascripts %}
  {{parent()}}
  <script src="{{ asset('./qrious/qrious.min.js','vendor') }}"></script>
  <script src="{{ asset('./jsrender/jsrender.min.js','vendor') }}"></script>
  <script src="{{ asset('./animatescroll.min.js','vendor') }}"></script>
  <script src="{{ asset('register.js','js') }}"></script>
{% endblock %}
